# RTMP configuration for StreamLite
rtmp {
    server {
        listen 1935;
        chunk_size 4096;
        allow publish all;
        allow play all;

        # Authentication
        on_publish http://127.0.0.1:5000/api/stream/auth;

        # Live streams
        application live {
            live on;
            record off;
            
            # Turn on HLS
            hls on;
            hls_path /var/hls;
            hls_fragment 3;
            hls_playlist_length 20;
            hls_nested on;
            hls_cleanup on;
            
            # For secure connections
            allow publish all;
            allow play all;
            
            # Low latency options
            hls_fragment_naming system;
            hls_sync 100ms;
            
            # MPEG-DASH (optional)
            # dash on;
            # dash_path /var/dash;
            # dash_fragment 3;
            # dash_playlist_length 20;
        }
    }
}